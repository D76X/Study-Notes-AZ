# [Managing Microsoft Azure Virtual Networks (by Tim Warner)](https://app.pluralsight.com/library/courses/microsoft-azure-implement-manage-virtual-networks)  

Refs

- [Microsoft Azure Architect Technologies](AZ-300)(https://app.pluralsight.com/paths/certificate/microsoft-azure-architect-technologies-az-300)

---

## [AZ-300 Objectives Coverage](https://www.microsoft.com/en-us/learning/exam-az-300.aspx)  

1. Deploy and Configure Infrastructure (25-50%)

    - Implement and manage virtual networking
    - Create connectivity between virtual networks

---

## Basics and Goals

1. Undestand the role of Azure Virtual Network (VNET)

2. How to design and deploy a VNET

3. Configure VNET Security Groups

4. Deploying IP configurations to VMs in Azure   

## Related Content

1. AZ-203

- [Provisioning Microsoft Azure Virtual Machines (by Anthony Nocentino)](https://app.pluralsight.com/library/courses/microsoft-azure-virtual-machines-provisioning/table-of-contents)

---

## Undestanding Azure Virtual Networks (VNETs)

### What is a VNET?

A VNET is a **container object** that provides the following services to an **Azure Administrator**.

1. **Traffic Isolation**
2. **Traffic segmentation**
3. **An isolation boundary**
4. **Traffic control into and out of the VNET boundary, between VNTEs, and within the VNET** at several different layers.

A **IPv4 address space** is assigned to each individual VNET. This is an overall **Classless Inter-Domain Routing block od addresses (CIDR) of private RFC1918 IP addresses**. These addresses being private are not internet routable. 
- [Classless Inter-Domain Routing](https://searchnetworking.techtarget.com/definition/CIDR)  
- [Classless Interdomain Routing (CIDR)](https://www.youtube.com/watch?v=Q1U9wVXRuHA)   

### Why do we need VNETs and how we use them?

Normally VNETs are used in conjunctions with VMs in that VMs are placed inside Virtual Networks. Furthermore, **service endpoints** of other Azure resources such as **Azure SQL database**, **Azure AppServices**, **Azure Storage Accounts** can also be **linked to** a VNET.

The resources that are part of a VNET can communicate with each other over **TCP/IP** by means of **private IP addresses**.

**Optionally, VMs can also e configured with public IP addresses (PIP)** which make them available over the Internet. However, this possibility opens up some security issues. There exist ways to overcome this security issues and yet make VMs available over the internet.

### Can different VNETs connect?

Yes, this is possible but **it is not automatic** and **active steps must be taken** to make sure that individual VNETs can communicate with each other.

### Layers and Parts of a typical VNET

In the traditional scenario of a n-tier application with the classical partitions

 - Web tier
 - Business tier
 - Data tier
 - Management tier
 - Active Directory tier

1. The VNET resource is the outermost boundary of an ecosystem of Azure resources. It normally encompasses all the tiers mentioned above.

2. Azure VMs normally live inside **subnets** created within the VNET and it is common practice to create a subnet per each tier. 

3. The number of the VMs within eaxch subnet depends on the specific application and the redundancy that the design requires per each tier.

4. The main reason why VMs are assigned to **subnets** within a VNET it is possible to secure each subnet by protecting traffic in and out each subnet by means of an **Azure resource called Network Security Group (NSG)**.

5. **Access to the whole Azure VNET by an administrator** can be achived by means of a design technique called **Jumpbox**. A **Jumpbox** is a dedicated VM deployed within a VNET AND TO WHICH A **public IP address** is assigned. This VM is now accessible from the internet but access to its public IP address can be restricted to administartors. These can then looged on this **Jumpbox VM** to manage all the remaining infrastructure withini the same VNET.

6. **Azure Load Balancers** are resources placed **outside** and **inside** the boundary of a VNET. A load balancer **placed outside** the VNET will normally have a public IP address which is made secure and its role is to load-balance the incoming request to the VMs that are deployed to the Web tier subnet. Conversely, load balancer **inside** the VNET are used to connet the upstream and downstream subnet i.e. a load balancer internal to teh VNET could be located in the subnet of the Business tier to receive the incoming traffic coming from the upstream web tier and load balance it to the **availability set** downstream. The term **Availability Set** in this context refer to the set of VMs deployed to the business subnet.


---